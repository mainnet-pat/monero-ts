"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _assert = _interopRequireDefault(require("assert"));
var _TestUtils = _interopRequireDefault(require("./utils/TestUtils"));
var _index = require("../../index");







/**
 * Test the Monero RPC connection manager.
 */
class TestMoneroConnectionManager {

  runTests() {
    describe("Test connection manager", function () {
      it("Can manage connections", async function () {
        let err;
        let walletRpcs = [];
        let connectionManager;
        try {

          // start monero-wallet-rpc instances as test server connections (can also use monerod servers)
          for (let i = 0; i < 5; i++) walletRpcs.push(await _TestUtils.default.startWalletRpcProcess());

          // create connection manager
          connectionManager = new _index.MoneroConnectionManager();

          // listen for changes
          let listener = new ConnectionChangeCollector();
          connectionManager.addListener(listener);

          // add prioritized connections
          await connectionManager.addConnection(walletRpcs[4].getRpcConnection().setPriority(1));
          await connectionManager.addConnection(walletRpcs[2].getRpcConnection().setPriority(2));
          await connectionManager.addConnection(walletRpcs[3].getRpcConnection().setPriority(2));
          await connectionManager.addConnection(walletRpcs[0].getRpcConnection()); // default priority is lowest
          await connectionManager.addConnection(new _index.MoneroRpcConnection(walletRpcs[1].getRpcConnection().getUri())); // test unauthenticated

          // test connections and order
          let orderedConnections = connectionManager.getConnections();
          (0, _assert.default)(orderedConnections[0] === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(orderedConnections[1] === walletRpcs[2].getRpcConnection());
          (0, _assert.default)(orderedConnections[2] === walletRpcs[3].getRpcConnection());
          (0, _assert.default)(orderedConnections[3] === walletRpcs[0].getRpcConnection());
          _assert.default.equal(orderedConnections[4].getUri(), walletRpcs[1].getRpcConnection().getUri());
          for (let connection of orderedConnections) _assert.default.equal(undefined, connection.getIsOnline());

          // test getting connection by uri
          (0, _assert.default)(connectionManager.hasConnection(walletRpcs[0].getRpcConnection().getUri()));
          (0, _assert.default)(connectionManager.getConnectionByUri(walletRpcs[0].getRpcConnection().getUri()) === walletRpcs[0].getRpcConnection());

          // test unknown connection
          let numExpectedChanges = 0;
          await connectionManager.setConnection(orderedConnections[0]);
          _assert.default.equal(connectionManager.isConnected(), undefined);
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);

          // auto connect to best available connection
          connectionManager.startPolling(_TestUtils.default.SYNC_PERIOD_IN_MS);
          await _index.GenUtils.waitFor(_TestUtils.default.AUTO_CONNECT_TIMEOUT_MS);
          (0, _assert.default)(connectionManager.isConnected());
          let connection = connectionManager.getConnection();
          (0, _assert.default)(connection.getIsOnline());
          (0, _assert.default)(connection === walletRpcs[4].getRpcConnection());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === connection);
          connectionManager.setAutoSwitch(false);
          connectionManager.stopPolling();
          await connectionManager.disconnect();
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === undefined);

          // start periodically checking connection without auto switch
          await connectionManager.startPolling(_TestUtils.default.SYNC_PERIOD_IN_MS, false);

          // connect to best available connection in order of priority and response time
          connection = await connectionManager.getBestAvailableConnection();
          await connectionManager.setConnection(connection);
          (0, _assert.default)(connection === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(connection.getIsOnline());
          (0, _assert.default)(connection.getIsAuthenticated());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === connection);

          // test connections and order
          orderedConnections = connectionManager.getConnections();
          (0, _assert.default)(orderedConnections[0] === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(orderedConnections[1] === walletRpcs[2].getRpcConnection());
          (0, _assert.default)(orderedConnections[2] === walletRpcs[3].getRpcConnection());
          (0, _assert.default)(orderedConnections[3] === walletRpcs[0].getRpcConnection());
          _assert.default.equal(orderedConnections[4].getUri(), walletRpcs[1].getRpcConnection().getUri());
          for (let i = 1; i < orderedConnections.length; i++) _assert.default.equal(undefined, orderedConnections[i].getIsOnline());

          // shut down prioritized servers
          walletRpcs[2].getRpcConnection().setFakeDisconnected(true); // browser does not start or stop instances
          walletRpcs[3].getRpcConnection().setFakeDisconnected(true);
          walletRpcs[4].getRpcConnection().setFakeDisconnected(true);
          await _index.GenUtils.waitFor(_TestUtils.default.SYNC_PERIOD_IN_MS + 100);
          _assert.default.equal(false, connectionManager.isConnected());
          _assert.default.equal(false, connectionManager.getConnection().getIsOnline());
          _assert.default.equal(undefined, connectionManager.getConnection().getIsAuthenticated());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === connectionManager.getConnection());

          // test connection order
          orderedConnections = connectionManager.getConnections();
          (0, _assert.default)(orderedConnections[0] === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(orderedConnections[1] === walletRpcs[0].getRpcConnection());
          _assert.default.equal(orderedConnections[2].getUri(), walletRpcs[1].getRpcConnection().getUri());
          (0, _assert.default)(orderedConnections[3] === walletRpcs[2].getRpcConnection());
          (0, _assert.default)(orderedConnections[4] === walletRpcs[3].getRpcConnection());

          // check all connections
          await connectionManager.checkConnections();

          // test connection order
          orderedConnections = connectionManager.getConnections();
          (0, _assert.default)(orderedConnections[0] === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(orderedConnections[1] === walletRpcs[0].getRpcConnection());
          (0, _assert.default)(orderedConnections[2].getUri() === walletRpcs[1].getRpcConnection().getUri());
          (0, _assert.default)(orderedConnections[3] === walletRpcs[2].getRpcConnection());
          (0, _assert.default)(orderedConnections[4] === walletRpcs[3].getRpcConnection());

          // test online and authentication status
          for (let i = 0; i < orderedConnections.length; i++) {
            let isOnline = orderedConnections[i].getIsOnline();
            let isAuthenticated = orderedConnections[i].getIsAuthenticated();
            if (i === 1 || i === 2) _assert.default.equal(true, isOnline);else
            _assert.default.equal(false, isOnline);
            if (i === 1) _assert.default.equal(true, isAuthenticated);else
            if (i === 2) _assert.default.equal(false, isAuthenticated);else
            _assert.default.equal(undefined, isAuthenticated);
          }

          // test auto switch when disconnected
          connectionManager.setAutoSwitch(true);
          await _index.GenUtils.waitFor(_TestUtils.default.SYNC_PERIOD_IN_MS + 100); // allow time to poll
          (0, _assert.default)(connectionManager.isConnected());
          connection = connectionManager.getConnection();
          (0, _assert.default)(connection.getIsOnline());
          (0, _assert.default)(connection === walletRpcs[0].getRpcConnection());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === connection);

          // test connection order
          orderedConnections = connectionManager.getConnections();
          (0, _assert.default)(orderedConnections[0] === connection);
          (0, _assert.default)(orderedConnections[0] === walletRpcs[0].getRpcConnection());
          (0, _assert.default)(orderedConnections[1].getUri() === walletRpcs[1].getRpcConnection().getUri());
          (0, _assert.default)(orderedConnections[2] === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(orderedConnections[3] === walletRpcs[2].getRpcConnection());
          (0, _assert.default)(orderedConnections[4] === walletRpcs[3].getRpcConnection());

          // connect to specific endpoint without authentication
          connection = orderedConnections[1];
          _assert.default.equal(false, connection.getIsAuthenticated());
          await connectionManager.setConnection(connection);
          _assert.default.equal(false, connectionManager.isConnected());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);

          // connect to specific endpoint with authentication
          connectionManager.setAutoSwitch(false);
          orderedConnections[1].setCredentials("rpc_user", "abc123");
          await connectionManager.checkConnection();
          _assert.default.equal(connection.getUri(), walletRpcs[1].getRpcConnection().getUri());
          (0, _assert.default)(connection.getIsOnline());
          (0, _assert.default)(connection.getIsAuthenticated());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === connection);

          // test connection order
          orderedConnections = connectionManager.getConnections();
          (0, _assert.default)(orderedConnections[0] === connectionManager.getConnection());
          _assert.default.equal(orderedConnections[0].getUri(), walletRpcs[1].getRpcConnection().getUri());
          (0, _assert.default)(orderedConnections[1] === walletRpcs[0].getRpcConnection());
          (0, _assert.default)(orderedConnections[2] === walletRpcs[4].getRpcConnection());
          (0, _assert.default)(orderedConnections[3] === walletRpcs[2].getRpcConnection());
          (0, _assert.default)(orderedConnections[4] === walletRpcs[3].getRpcConnection());
          for (let i = 0; i < orderedConnections.length; i++) (0, _assert.default)(i <= 1 ? orderedConnections[i].getIsOnline() : !orderedConnections[i].getIsOnline());

          // set connection to existing uri
          await connectionManager.setConnection(walletRpcs[0].getRpcConnection().getUri());
          (0, _assert.default)(connectionManager.isConnected());
          (0, _assert.default)(walletRpcs[0].getRpcConnection() === connectionManager.getConnection());
          _assert.default.equal(_TestUtils.default.WALLET_RPC_CONFIG.username, connectionManager.getConnection().getUsername());
          _assert.default.equal(_TestUtils.default.WALLET_RPC_CONFIG.password, connectionManager.getConnection().getPassword());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === walletRpcs[0].getRpcConnection());

          // set connection to new uri
          connectionManager.stopPolling();
          let uri = "http://localhost:49999";
          await connectionManager.setConnection(uri);
          _assert.default.equal(connectionManager.getConnection().getUri(), uri);
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          _assert.default.equal(uri, listener.changedConnections[listener.changedConnections.length - 1].getUri());

          // set connection to empty string
          await connectionManager.setConnection("");
          _assert.default.equal(undefined, connectionManager.getConnection());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);

          // check all connections and test auto switch
          connectionManager.setAutoSwitch(true);
          await connectionManager.checkConnections();
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(connectionManager.isConnected());

          // remove current connection and test auto switch
          await connectionManager.removeConnection(connectionManager.getConnection().getUri());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          _assert.default.equal(connectionManager.isConnected(), false);
          await connectionManager.checkConnections();
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(connectionManager.isConnected());

          // check connection promises
          await Promise.all(connectionManager.checkConnectionPromises());

          // test polling current connection
          await connectionManager.setConnection();
          _assert.default.equal(connectionManager.isConnected(), false);
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          connectionManager.startPolling(_TestUtils.default.SYNC_PERIOD_IN_MS, undefined, undefined, _index.MoneroConnectionManager.PollType.CURRENT, undefined);
          await _index.GenUtils.waitFor(_TestUtils.default.AUTO_CONNECT_TIMEOUT_MS);
          (0, _assert.default)(connectionManager.isConnected());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);

          // test polling all connections
          await connectionManager.setConnection();
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          connectionManager.startPolling(_TestUtils.default.SYNC_PERIOD_IN_MS, undefined, undefined, _index.MoneroConnectionManager.PollType.ALL, undefined);
          await _index.GenUtils.waitFor(_TestUtils.default.AUTO_CONNECT_TIMEOUT_MS);
          (0, _assert.default)(connectionManager.isConnected());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);

          // shut down all connections
          connection = connectionManager.getConnection();
          for (let connection of orderedConnections) connection.setFakeDisconnected(true);
          await _index.GenUtils.waitFor(_TestUtils.default.SYNC_PERIOD_IN_MS + 100);
          _assert.default.equal(false, connection.getIsOnline());
          _assert.default.equal(listener.changedConnections.length, ++numExpectedChanges);
          (0, _assert.default)(listener.changedConnections[listener.changedConnections.length - 1] === connection);

          // reset
          connectionManager.reset();
          _assert.default.equal(connectionManager.getConnections().length, 0);
          _assert.default.equal(connectionManager.getConnection(), undefined);
        } catch (err2) {
          err = err2;
        }

        // stop connection manager
        if (connectionManager) connectionManager.reset();

        // stop monero-wallet-rpc instances
        for (let walletRpc of walletRpcs) {
          try {await _TestUtils.default.stopWalletRpcProcess(walletRpc);}
          catch (err2) {}
        }

        // throw error if applicable
        if (err) throw err;
      });
    });
  }
}

class ConnectionChangeCollector extends _index.MoneroConnectionManagerListener {

  changedConnections = [];

  constructor() {
    super();
    this.changedConnections = [];
  }
  async onConnectionChanged(connection) {
    this.changedConnections.push(connection);
  }
}var _default = exports.default =

TestMoneroConnectionManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXNzZXJ0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfVGVzdFV0aWxzIiwiX2luZGV4IiwiVGVzdE1vbmVyb0Nvbm5lY3Rpb25NYW5hZ2VyIiwicnVuVGVzdHMiLCJkZXNjcmliZSIsIml0IiwiZXJyIiwid2FsbGV0UnBjcyIsImNvbm5lY3Rpb25NYW5hZ2VyIiwiaSIsInB1c2giLCJUZXN0VXRpbHMiLCJzdGFydFdhbGxldFJwY1Byb2Nlc3MiLCJNb25lcm9Db25uZWN0aW9uTWFuYWdlciIsImxpc3RlbmVyIiwiQ29ubmVjdGlvbkNoYW5nZUNvbGxlY3RvciIsImFkZExpc3RlbmVyIiwiYWRkQ29ubmVjdGlvbiIsImdldFJwY0Nvbm5lY3Rpb24iLCJzZXRQcmlvcml0eSIsIk1vbmVyb1JwY0Nvbm5lY3Rpb24iLCJnZXRVcmkiLCJvcmRlcmVkQ29ubmVjdGlvbnMiLCJnZXRDb25uZWN0aW9ucyIsImFzc2VydCIsImVxdWFsIiwiY29ubmVjdGlvbiIsInVuZGVmaW5lZCIsImdldElzT25saW5lIiwiaGFzQ29ubmVjdGlvbiIsImdldENvbm5lY3Rpb25CeVVyaSIsIm51bUV4cGVjdGVkQ2hhbmdlcyIsInNldENvbm5lY3Rpb24iLCJpc0Nvbm5lY3RlZCIsImNoYW5nZWRDb25uZWN0aW9ucyIsImxlbmd0aCIsInN0YXJ0UG9sbGluZyIsIlNZTkNfUEVSSU9EX0lOX01TIiwiR2VuVXRpbHMiLCJ3YWl0Rm9yIiwiQVVUT19DT05ORUNUX1RJTUVPVVRfTVMiLCJnZXRDb25uZWN0aW9uIiwic2V0QXV0b1N3aXRjaCIsInN0b3BQb2xsaW5nIiwiZGlzY29ubmVjdCIsImdldEJlc3RBdmFpbGFibGVDb25uZWN0aW9uIiwiZ2V0SXNBdXRoZW50aWNhdGVkIiwic2V0RmFrZURpc2Nvbm5lY3RlZCIsImNoZWNrQ29ubmVjdGlvbnMiLCJpc09ubGluZSIsImlzQXV0aGVudGljYXRlZCIsInNldENyZWRlbnRpYWxzIiwiY2hlY2tDb25uZWN0aW9uIiwiV0FMTEVUX1JQQ19DT05GSUciLCJ1c2VybmFtZSIsImdldFVzZXJuYW1lIiwicGFzc3dvcmQiLCJnZXRQYXNzd29yZCIsInVyaSIsInJlbW92ZUNvbm5lY3Rpb24iLCJQcm9taXNlIiwiYWxsIiwiY2hlY2tDb25uZWN0aW9uUHJvbWlzZXMiLCJQb2xsVHlwZSIsIkNVUlJFTlQiLCJBTEwiLCJyZXNldCIsImVycjIiLCJ3YWxsZXRScGMiLCJzdG9wV2FsbGV0UnBjUHJvY2VzcyIsIk1vbmVyb0Nvbm5lY3Rpb25NYW5hZ2VyTGlzdGVuZXIiLCJjb25zdHJ1Y3RvciIsIm9uQ29ubmVjdGlvbkNoYW5nZWQiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Rlc3QvVGVzdE1vbmVyb0Nvbm5lY3Rpb25NYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xuaW1wb3J0IFRlc3RVdGlscyBmcm9tIFwiLi91dGlscy9UZXN0VXRpbHNcIjtcbmltcG9ydCB7XG4gIEdlblV0aWxzLFxuICBNb25lcm9XYWxsZXRScGMsXG4gIE1vbmVyb0Nvbm5lY3Rpb25NYW5hZ2VyLFxuICBNb25lcm9Db25uZWN0aW9uTWFuYWdlckxpc3RlbmVyLFxuICBNb25lcm9ScGNDb25uZWN0aW9uXG59IGZyb20gXCIuLi8uLi9pbmRleFwiO1xuXG4vKipcbiAqIFRlc3QgdGhlIE1vbmVybyBSUEMgY29ubmVjdGlvbiBtYW5hZ2VyLlxuICovXG5jbGFzcyBUZXN0TW9uZXJvQ29ubmVjdGlvbk1hbmFnZXIge1xuICBcbiAgcnVuVGVzdHMoKSB7XG4gICAgZGVzY3JpYmUoXCJUZXN0IGNvbm5lY3Rpb24gbWFuYWdlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGl0KFwiQ2FuIG1hbmFnZSBjb25uZWN0aW9uc1wiLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGVycjtcbiAgICAgICAgbGV0IHdhbGxldFJwY3M6IE1vbmVyb1dhbGxldFJwY1tdID0gW107XG4gICAgICAgIGxldCBjb25uZWN0aW9uTWFuYWdlcjogTW9uZXJvQ29ubmVjdGlvbk1hbmFnZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gc3RhcnQgbW9uZXJvLXdhbGxldC1ycGMgaW5zdGFuY2VzIGFzIHRlc3Qgc2VydmVyIGNvbm5lY3Rpb25zIChjYW4gYWxzbyB1c2UgbW9uZXJvZCBzZXJ2ZXJzKVxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB3YWxsZXRScGNzLnB1c2goYXdhaXQgVGVzdFV0aWxzLnN0YXJ0V2FsbGV0UnBjUHJvY2VzcygpKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBjcmVhdGUgY29ubmVjdGlvbiBtYW5hZ2VyXG4gICAgICAgICAgY29ubmVjdGlvbk1hbmFnZXIgPSBuZXcgTW9uZXJvQ29ubmVjdGlvbk1hbmFnZXIoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBsaXN0ZW4gZm9yIGNoYW5nZXNcbiAgICAgICAgICBsZXQgbGlzdGVuZXIgPSBuZXcgQ29ubmVjdGlvbkNoYW5nZUNvbGxlY3RvcigpO1xuICAgICAgICAgIGNvbm5lY3Rpb25NYW5hZ2VyLmFkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBhZGQgcHJpb3JpdGl6ZWQgY29ubmVjdGlvbnNcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5hZGRDb25uZWN0aW9uKHdhbGxldFJwY3NbNF0uZ2V0UnBjQ29ubmVjdGlvbigpIS5zZXRQcmlvcml0eSgxKSk7XG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuYWRkQ29ubmVjdGlvbih3YWxsZXRScGNzWzJdLmdldFJwY0Nvbm5lY3Rpb24oKSEuc2V0UHJpb3JpdHkoMikpO1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb25NYW5hZ2VyLmFkZENvbm5lY3Rpb24od2FsbGV0UnBjc1szXS5nZXRScGNDb25uZWN0aW9uKCkhLnNldFByaW9yaXR5KDIpKTtcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5hZGRDb25uZWN0aW9uKHdhbGxldFJwY3NbMF0uZ2V0UnBjQ29ubmVjdGlvbigpKTsgLy8gZGVmYXVsdCBwcmlvcml0eSBpcyBsb3dlc3RcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5hZGRDb25uZWN0aW9uKG5ldyBNb25lcm9ScGNDb25uZWN0aW9uKHdhbGxldFJwY3NbMV0uZ2V0UnBjQ29ubmVjdGlvbigpIS5nZXRVcmkoKSkpOyAvLyB0ZXN0IHVuYXV0aGVudGljYXRlZFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIHRlc3QgY29ubmVjdGlvbnMgYW5kIG9yZGVyXG4gICAgICAgICAgbGV0IG9yZGVyZWRDb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1swXSA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbMV0gPT09IHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzJdID09PSB3YWxsZXRScGNzWzNdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1szXSA9PT0gd2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChvcmRlcmVkQ29ubmVjdGlvbnNbNF0uZ2V0VXJpKCksICh3YWxsZXRScGNzWzFdLmdldFJwY0Nvbm5lY3Rpb24oKSEpLmdldFVyaSgpKTtcbiAgICAgICAgICBmb3IgKGxldCBjb25uZWN0aW9uIG9mIG9yZGVyZWRDb25uZWN0aW9ucykgYXNzZXJ0LmVxdWFsKHVuZGVmaW5lZCwgY29ubmVjdGlvbi5nZXRJc09ubGluZSgpKTtcblxuICAgICAgICAgIC8vIHRlc3QgZ2V0dGluZyBjb25uZWN0aW9uIGJ5IHVyaVxuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uTWFuYWdlci5oYXNDb25uZWN0aW9uKHdhbGxldFJwY3NbMF0uZ2V0UnBjQ29ubmVjdGlvbigpIS5nZXRVcmkoKSkpO1xuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uQnlVcmkod2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkhLmdldFVyaSgpKSA9PT0gd2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkpO1xuXG4gICAgICAgICAgLy8gdGVzdCB1bmtub3duIGNvbm5lY3Rpb25cbiAgICAgICAgICBsZXQgbnVtRXhwZWN0ZWRDaGFuZ2VzID0gMDtcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5zZXRDb25uZWN0aW9uKG9yZGVyZWRDb25uZWN0aW9uc1swXSk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGNvbm5lY3Rpb25NYW5hZ2VyLmlzQ29ubmVjdGVkKCksIHVuZGVmaW5lZCk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGxpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9ucy5sZW5ndGgsICsrbnVtRXhwZWN0ZWRDaGFuZ2VzKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBhdXRvIGNvbm5lY3QgdG8gYmVzdCBhdmFpbGFibGUgY29ubmVjdGlvblxuICAgICAgICAgIGNvbm5lY3Rpb25NYW5hZ2VyLnN0YXJ0UG9sbGluZyhUZXN0VXRpbHMuU1lOQ19QRVJJT0RfSU5fTVMpO1xuICAgICAgICAgIGF3YWl0IEdlblV0aWxzLndhaXRGb3IoVGVzdFV0aWxzLkFVVE9fQ09OTkVDVF9USU1FT1VUX01TKTtcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbk1hbmFnZXIuaXNDb25uZWN0ZWQoKSk7XG4gICAgICAgICAgbGV0IGNvbm5lY3Rpb24gPSBjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgYXNzZXJ0KGNvbm5lY3Rpb24uZ2V0SXNPbmxpbmUoKSk7XG4gICAgICAgICAgYXNzZXJ0KGNvbm5lY3Rpb24gPT09IHdhbGxldFJwY3NbNF0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIGFzc2VydChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnNbbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCAtIDFdID09PSBjb25uZWN0aW9uKTtcbiAgICAgICAgICBjb25uZWN0aW9uTWFuYWdlci5zZXRBdXRvU3dpdGNoKGZhbHNlKTtcbiAgICAgICAgICBjb25uZWN0aW9uTWFuYWdlci5zdG9wUG9sbGluZygpO1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb25NYW5hZ2VyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIGFzc2VydChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnNbbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCAtIDFdID09PSB1bmRlZmluZWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIHN0YXJ0IHBlcmlvZGljYWxseSBjaGVja2luZyBjb25uZWN0aW9uIHdpdGhvdXQgYXV0byBzd2l0Y2hcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5zdGFydFBvbGxpbmcoVGVzdFV0aWxzLlNZTkNfUEVSSU9EX0lOX01TLCBmYWxzZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gY29ubmVjdCB0byBiZXN0IGF2YWlsYWJsZSBjb25uZWN0aW9uIGluIG9yZGVyIG9mIHByaW9yaXR5IGFuZCByZXNwb25zZSB0aW1lXG4gICAgICAgICAgY29ubmVjdGlvbiA9IGF3YWl0IGNvbm5lY3Rpb25NYW5hZ2VyLmdldEJlc3RBdmFpbGFibGVDb25uZWN0aW9uKCk7XG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuc2V0Q29ubmVjdGlvbihjb25uZWN0aW9uKTtcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbiA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uLmdldElzT25saW5lKCkpO1xuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uLmdldElzQXV0aGVudGljYXRlZCgpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIGFzc2VydChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnNbbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCAtIDFdID09PSBjb25uZWN0aW9uKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyB0ZXN0IGNvbm5lY3Rpb25zIGFuZCBvcmRlclxuICAgICAgICAgIG9yZGVyZWRDb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1swXSA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbMV0gPT09IHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzJdID09PSB3YWxsZXRScGNzWzNdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1szXSA9PT0gd2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChvcmRlcmVkQ29ubmVjdGlvbnNbNF0uZ2V0VXJpKCksIHdhbGxldFJwY3NbMV0uZ2V0UnBjQ29ubmVjdGlvbigpIS5nZXRVcmkoKSk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBvcmRlcmVkQ29ubmVjdGlvbnMubGVuZ3RoOyBpKyspIGFzc2VydC5lcXVhbCh1bmRlZmluZWQsIG9yZGVyZWRDb25uZWN0aW9uc1tpXS5nZXRJc09ubGluZSgpKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBzaHV0IGRvd24gcHJpb3JpdGl6ZWQgc2VydmVyc1xuICAgICAgICAgIHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpIS5zZXRGYWtlRGlzY29ubmVjdGVkKHRydWUpOyAvLyBicm93c2VyIGRvZXMgbm90IHN0YXJ0IG9yIHN0b3AgaW5zdGFuY2VzXG4gICAgICAgICAgd2FsbGV0UnBjc1szXS5nZXRScGNDb25uZWN0aW9uKCkhLnNldEZha2VEaXNjb25uZWN0ZWQodHJ1ZSk7XG4gICAgICAgICAgd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkhLnNldEZha2VEaXNjb25uZWN0ZWQodHJ1ZSk7XG4gICAgICAgICAgYXdhaXQgR2VuVXRpbHMud2FpdEZvcihUZXN0VXRpbHMuU1lOQ19QRVJJT0RfSU5fTVMgKyAxMDApO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChmYWxzZSwgY29ubmVjdGlvbk1hbmFnZXIuaXNDb25uZWN0ZWQoKSk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGZhbHNlLCBjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCkuZ2V0SXNPbmxpbmUoKSk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKHVuZGVmaW5lZCwgY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbigpLmdldElzQXV0aGVudGljYXRlZCgpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIGFzc2VydChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnNbbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCAtIDFdID09PSBjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIHRlc3QgY29ubmVjdGlvbiBvcmRlclxuICAgICAgICAgIG9yZGVyZWRDb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1swXSA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbMV0gPT09IHdhbGxldFJwY3NbMF0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwob3JkZXJlZENvbm5lY3Rpb25zWzJdLmdldFVyaSgpLCB3YWxsZXRScGNzWzFdLmdldFJwY0Nvbm5lY3Rpb24oKSEuZ2V0VXJpKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbM10gPT09IHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzRdID09PSB3YWxsZXRScGNzWzNdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gY2hlY2sgYWxsIGNvbm5lY3Rpb25zXG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuY2hlY2tDb25uZWN0aW9ucygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIHRlc3QgY29ubmVjdGlvbiBvcmRlclxuICAgICAgICAgIG9yZGVyZWRDb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1swXSA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbMV0gPT09IHdhbGxldFJwY3NbMF0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzJdLmdldFVyaSgpID09PSB3YWxsZXRScGNzWzFdLmdldFJwY0Nvbm5lY3Rpb24oKSEuZ2V0VXJpKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbM10gPT09IHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzRdID09PSB3YWxsZXRScGNzWzNdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gdGVzdCBvbmxpbmUgYW5kIGF1dGhlbnRpY2F0aW9uIHN0YXR1c1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JkZXJlZENvbm5lY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaXNPbmxpbmUgPSBvcmRlcmVkQ29ubmVjdGlvbnNbaV0uZ2V0SXNPbmxpbmUoKTtcbiAgICAgICAgICAgIGxldCBpc0F1dGhlbnRpY2F0ZWQgPSBvcmRlcmVkQ29ubmVjdGlvbnNbaV0uZ2V0SXNBdXRoZW50aWNhdGVkKCk7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMSB8fCBpID09PSAyKSBhc3NlcnQuZXF1YWwodHJ1ZSwgaXNPbmxpbmUpO1xuICAgICAgICAgICAgZWxzZSBhc3NlcnQuZXF1YWwoZmFsc2UsIGlzT25saW5lKTtcbiAgICAgICAgICAgIGlmIChpID09PSAxKSBhc3NlcnQuZXF1YWwodHJ1ZSwgaXNBdXRoZW50aWNhdGVkKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IDIpIGFzc2VydC5lcXVhbChmYWxzZSwgaXNBdXRoZW50aWNhdGVkKTtcbiAgICAgICAgICAgIGVsc2UgYXNzZXJ0LmVxdWFsKHVuZGVmaW5lZCwgaXNBdXRoZW50aWNhdGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gdGVzdCBhdXRvIHN3aXRjaCB3aGVuIGRpc2Nvbm5lY3RlZFxuICAgICAgICAgIGNvbm5lY3Rpb25NYW5hZ2VyLnNldEF1dG9Td2l0Y2godHJ1ZSk7XG4gICAgICAgICAgYXdhaXQgR2VuVXRpbHMud2FpdEZvcihUZXN0VXRpbHMuU1lOQ19QRVJJT0RfSU5fTVMgKyAxMDApOyAvLyBhbGxvdyB0aW1lIHRvIHBvbGxcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbk1hbmFnZXIuaXNDb25uZWN0ZWQoKSk7XG4gICAgICAgICAgY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbi5nZXRJc09ubGluZSgpKTtcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbiA9PT0gd2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgYXNzZXJ0KGxpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9uc1tsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoIC0gMV0gPT09IGNvbm5lY3Rpb24pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIHRlc3QgY29ubmVjdGlvbiBvcmRlclxuICAgICAgICAgIG9yZGVyZWRDb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1swXSA9PT0gY29ubmVjdGlvbik7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1swXSA9PT0gd2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbMV0uZ2V0VXJpKCkgPT09IHdhbGxldFJwY3NbMV0uZ2V0UnBjQ29ubmVjdGlvbigpIS5nZXRVcmkoKSk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1syXSA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbM10gPT09IHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzRdID09PSB3YWxsZXRScGNzWzNdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gY29ubmVjdCB0byBzcGVjaWZpYyBlbmRwb2ludCB3aXRob3V0IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgY29ubmVjdGlvbiA9IG9yZGVyZWRDb25uZWN0aW9uc1sxXTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwoZmFsc2UsIGNvbm5lY3Rpb24uZ2V0SXNBdXRoZW50aWNhdGVkKCkpO1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb25NYW5hZ2VyLnNldENvbm5lY3Rpb24oY29ubmVjdGlvbik7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGZhbHNlLCBjb25uZWN0aW9uTWFuYWdlci5pc0Nvbm5lY3RlZCgpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIGNvbm5lY3QgdG8gc3BlY2lmaWMgZW5kcG9pbnQgd2l0aCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgIGNvbm5lY3Rpb25NYW5hZ2VyLnNldEF1dG9Td2l0Y2goZmFsc2UpO1xuICAgICAgICAgIG9yZGVyZWRDb25uZWN0aW9uc1sxXS5zZXRDcmVkZW50aWFscyhcInJwY191c2VyXCIsIFwiYWJjMTIzXCIpO1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb25NYW5hZ2VyLmNoZWNrQ29ubmVjdGlvbigpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChjb25uZWN0aW9uLmdldFVyaSgpLCB3YWxsZXRScGNzWzFdLmdldFJwY0Nvbm5lY3Rpb24oKSEuZ2V0VXJpKCkpO1xuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uLmdldElzT25saW5lKCkpO1xuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uLmdldElzQXV0aGVudGljYXRlZCgpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIGFzc2VydChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnNbbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCAtIDFdID09PSBjb25uZWN0aW9uKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyB0ZXN0IGNvbm5lY3Rpb24gb3JkZXJcbiAgICAgICAgICBvcmRlcmVkQ29ubmVjdGlvbnMgPSBjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9ucygpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbMF0gPT09IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKG9yZGVyZWRDb25uZWN0aW9uc1swXS5nZXRVcmkoKSwgd2FsbGV0UnBjc1sxXS5nZXRScGNDb25uZWN0aW9uKCkhLmdldFVyaSgpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzFdID09PSB3YWxsZXRScGNzWzBdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgYXNzZXJ0KG9yZGVyZWRDb25uZWN0aW9uc1syXSA9PT0gd2FsbGV0UnBjc1s0XS5nZXRScGNDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydChvcmRlcmVkQ29ubmVjdGlvbnNbM10gPT09IHdhbGxldFJwY3NbMl0uZ2V0UnBjQ29ubmVjdGlvbigpKTtcbiAgICAgICAgICBhc3NlcnQob3JkZXJlZENvbm5lY3Rpb25zWzRdID09PSB3YWxsZXRScGNzWzNdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlcmVkQ29ubmVjdGlvbnMubGVuZ3RoOyBpKyspIGFzc2VydChpIDw9IDEgPyBvcmRlcmVkQ29ubmVjdGlvbnNbaV0uZ2V0SXNPbmxpbmUoKSA6ICFvcmRlcmVkQ29ubmVjdGlvbnNbaV0uZ2V0SXNPbmxpbmUoKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gc2V0IGNvbm5lY3Rpb24gdG8gZXhpc3RpbmcgdXJpXG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuc2V0Q29ubmVjdGlvbih3YWxsZXRScGNzWzBdLmdldFJwY0Nvbm5lY3Rpb24oKSEuZ2V0VXJpKCkpO1xuICAgICAgICAgIGFzc2VydChjb25uZWN0aW9uTWFuYWdlci5pc0Nvbm5lY3RlZCgpKTtcbiAgICAgICAgICBhc3NlcnQod2FsbGV0UnBjc1swXS5nZXRScGNDb25uZWN0aW9uKCkgPT09IGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKFRlc3RVdGlscy5XQUxMRVRfUlBDX0NPTkZJRy51c2VybmFtZSwgY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbigpLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChUZXN0VXRpbHMuV0FMTEVUX1JQQ19DT05GSUcucGFzc3dvcmQsIGNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb24oKS5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwobGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCwgKytudW1FeHBlY3RlZENoYW5nZXMpO1xuICAgICAgICAgIGFzc2VydChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnNbbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zLmxlbmd0aCAtIDFdID09PSB3YWxsZXRScGNzWzBdLmdldFJwY0Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gc2V0IGNvbm5lY3Rpb24gdG8gbmV3IHVyaVxuICAgICAgICAgIGNvbm5lY3Rpb25NYW5hZ2VyLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgICAgbGV0IHVyaSA9IFwiaHR0cDovL2xvY2FsaG9zdDo0OTk5OVwiO1xuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb25NYW5hZ2VyLnNldENvbm5lY3Rpb24odXJpKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwoY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbigpLmdldFVyaSgpLCB1cmkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKHVyaSwgbGlzdGVuZXIuY2hhbmdlZENvbm5lY3Rpb25zW2xpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9ucy5sZW5ndGggLSAxXS5nZXRVcmkoKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gc2V0IGNvbm5lY3Rpb24gdG8gZW1wdHkgc3RyaW5nXG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuc2V0Q29ubmVjdGlvbihcIlwiKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwodW5kZWZpbmVkLCBjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gY2hlY2sgYWxsIGNvbm5lY3Rpb25zIGFuZCB0ZXN0IGF1dG8gc3dpdGNoXG4gICAgICAgICAgY29ubmVjdGlvbk1hbmFnZXIuc2V0QXV0b1N3aXRjaCh0cnVlKTtcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5jaGVja0Nvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGxpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9ucy5sZW5ndGgsICsrbnVtRXhwZWN0ZWRDaGFuZ2VzKTtcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbk1hbmFnZXIuaXNDb25uZWN0ZWQoKSk7XG5cbiAgICAgICAgICAvLyByZW1vdmUgY3VycmVudCBjb25uZWN0aW9uIGFuZCB0ZXN0IGF1dG8gc3dpdGNoXG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIucmVtb3ZlQ29ubmVjdGlvbihjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCkuZ2V0VXJpKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGNvbm5lY3Rpb25NYW5hZ2VyLmlzQ29ubmVjdGVkKCksIGZhbHNlKTtcbiAgICAgICAgICBhd2FpdCBjb25uZWN0aW9uTWFuYWdlci5jaGVja0Nvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGxpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9ucy5sZW5ndGgsICsrbnVtRXhwZWN0ZWRDaGFuZ2VzKTtcbiAgICAgICAgICBhc3NlcnQoY29ubmVjdGlvbk1hbmFnZXIuaXNDb25uZWN0ZWQoKSk7XG5cbiAgICAgICAgICAvLyBjaGVjayBjb25uZWN0aW9uIHByb21pc2VzXG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY29ubmVjdGlvbk1hbmFnZXIuY2hlY2tDb25uZWN0aW9uUHJvbWlzZXMoKSk7XG5cbiAgICAgICAgICAvLyB0ZXN0IHBvbGxpbmcgY3VycmVudCBjb25uZWN0aW9uXG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuc2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChjb25uZWN0aW9uTWFuYWdlci5pc0Nvbm5lY3RlZCgpLCBmYWxzZSk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGxpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9ucy5sZW5ndGgsICsrbnVtRXhwZWN0ZWRDaGFuZ2VzKTtcbiAgICAgICAgICBjb25uZWN0aW9uTWFuYWdlci5zdGFydFBvbGxpbmcoVGVzdFV0aWxzLlNZTkNfUEVSSU9EX0lOX01TLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgTW9uZXJvQ29ubmVjdGlvbk1hbmFnZXIuUG9sbFR5cGUuQ1VSUkVOVCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICBhd2FpdCBHZW5VdGlscy53YWl0Rm9yKFRlc3RVdGlscy5BVVRPX0NPTk5FQ1RfVElNRU9VVF9NUyk7XG4gICAgICAgICAgYXNzZXJ0KGNvbm5lY3Rpb25NYW5hZ2VyLmlzQ29ubmVjdGVkKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG5cbiAgICAgICAgICAvLyB0ZXN0IHBvbGxpbmcgYWxsIGNvbm5lY3Rpb25zXG4gICAgICAgICAgYXdhaXQgY29ubmVjdGlvbk1hbmFnZXIuc2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgY29ubmVjdGlvbk1hbmFnZXIuc3RhcnRQb2xsaW5nKFRlc3RVdGlscy5TWU5DX1BFUklPRF9JTl9NUywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIE1vbmVyb0Nvbm5lY3Rpb25NYW5hZ2VyLlBvbGxUeXBlLkFMTCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICBhd2FpdCBHZW5VdGlscy53YWl0Rm9yKFRlc3RVdGlscy5BVVRPX0NPTk5FQ1RfVElNRU9VVF9NUyk7XG4gICAgICAgICAgYXNzZXJ0KGNvbm5lY3Rpb25NYW5hZ2VyLmlzQ29ubmVjdGVkKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gc2h1dCBkb3duIGFsbCBjb25uZWN0aW9uc1xuICAgICAgICAgIGNvbm5lY3Rpb24gPSBjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgZm9yIChsZXQgY29ubmVjdGlvbiBvZiBvcmRlcmVkQ29ubmVjdGlvbnMpIGNvbm5lY3Rpb24uc2V0RmFrZURpc2Nvbm5lY3RlZCh0cnVlKTtcbiAgICAgICAgICBhd2FpdCBHZW5VdGlscy53YWl0Rm9yKFRlc3RVdGlscy5TWU5DX1BFUklPRF9JTl9NUyArIDEwMCk7XG4gICAgICAgICAgYXNzZXJ0LmVxdWFsKGZhbHNlLCBjb25uZWN0aW9uLmdldElzT25saW5lKCkpO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoLCArK251bUV4cGVjdGVkQ2hhbmdlcyk7XG4gICAgICAgICAgYXNzZXJ0KGxpc3RlbmVyLmNoYW5nZWRDb25uZWN0aW9uc1tsaXN0ZW5lci5jaGFuZ2VkQ29ubmVjdGlvbnMubGVuZ3RoIC0gMV0gPT09IGNvbm5lY3Rpb24pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIHJlc2V0XG4gICAgICAgICAgY29ubmVjdGlvbk1hbmFnZXIucmVzZXQoKTtcbiAgICAgICAgICBhc3NlcnQuZXF1YWwoY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbnMoKS5sZW5ndGgsIDApO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChjb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKCksIHVuZGVmaW5lZCk7XG4gICAgICAgIH0gY2F0Y2goZXJyMikge1xuICAgICAgICAgIGVyciA9IGVycjI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdG9wIGNvbm5lY3Rpb24gbWFuYWdlclxuICAgICAgICBpZiAoY29ubmVjdGlvbk1hbmFnZXIpIGNvbm5lY3Rpb25NYW5hZ2VyLnJlc2V0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBzdG9wIG1vbmVyby13YWxsZXQtcnBjIGluc3RhbmNlc1xuICAgICAgICBmb3IgKGxldCB3YWxsZXRScGMgb2Ygd2FsbGV0UnBjcykge1xuICAgICAgICAgIHRyeSB7IGF3YWl0IFRlc3RVdGlscy5zdG9wV2FsbGV0UnBjUHJvY2Vzcyh3YWxsZXRScGMpOyB9XG4gICAgICAgICAgY2F0Y2ggKGVycjIpIHsgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyB0aHJvdyBlcnJvciBpZiBhcHBsaWNhYmxlXG4gICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIENvbm5lY3Rpb25DaGFuZ2VDb2xsZWN0b3IgZXh0ZW5kcyBNb25lcm9Db25uZWN0aW9uTWFuYWdlckxpc3RlbmVyIHtcblxuICBjaGFuZ2VkQ29ubmVjdGlvbnM6IE1vbmVyb1JwY0Nvbm5lY3Rpb25bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jaGFuZ2VkQ29ubmVjdGlvbnMgPSBbXTtcbiAgfVxuICBhc3luYyBvbkNvbm5lY3Rpb25DaGFuZ2VkKGNvbm5lY3Rpb24pIHtcbiAgICB0aGlzLmNoYW5nZWRDb25uZWN0aW9ucy5wdXNoKGNvbm5lY3Rpb24pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRlc3RNb25lcm9Db25uZWN0aW9uTWFuYWdlcjtcbiJdLCJtYXBwaW5ncyI6InlMQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE1BQUEsR0FBQUYsT0FBQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQSxNQUFNRywyQkFBMkIsQ0FBQzs7RUFFaENDLFFBQVFBLENBQUEsRUFBRztJQUNUQyxRQUFRLENBQUMseUJBQXlCLEVBQUUsWUFBVztNQUM3Q0MsRUFBRSxDQUFDLHdCQUF3QixFQUFFLGtCQUFpQjtRQUM1QyxJQUFJQyxHQUFHO1FBQ1AsSUFBSUMsVUFBNkIsR0FBRyxFQUFFO1FBQ3RDLElBQUlDLGlCQUEwQztRQUM5QyxJQUFJOztVQUVGO1VBQ0EsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRUYsVUFBVSxDQUFDRyxJQUFJLENBQUMsTUFBTUMsa0JBQVMsQ0FBQ0MscUJBQXFCLENBQUMsQ0FBQyxDQUFDOztVQUVwRjtVQUNBSixpQkFBaUIsR0FBRyxJQUFJSyw4QkFBdUIsQ0FBQyxDQUFDOztVQUVqRDtVQUNBLElBQUlDLFFBQVEsR0FBRyxJQUFJQyx5QkFBeUIsQ0FBQyxDQUFDO1VBQzlDUCxpQkFBaUIsQ0FBQ1EsV0FBVyxDQUFDRixRQUFRLENBQUM7O1VBRXZDO1VBQ0EsTUFBTU4saUJBQWlCLENBQUNTLGFBQWEsQ0FBQ1YsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDVyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUVDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztVQUN2RixNQUFNWCxpQkFBaUIs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